{% load static %}

<html lang="ua">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="{% static '/css/chat.css' %}" />
  <link rel="stylesheet" href="{% static '/css/main.css' %}" />
  <link rel="shortcut icon" type="image/png" href="{% static 'img/favicon.ico' %}" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap"
    rel="stylesheet" />
  <title>Main</title>
</head>

<body>
  <div class="main_page">
    <div class="left_side_menu">
      <div class="left_side_menu-logo">
        <img class="left_side-img" src="{% static 'img/Facebook.svg' %}" alt="main_left" />
      </div>

      <div class="main_in_left_menu left_menu_block left_hover">
        <div class="left_side-img">
          <img class="home_pic" src="{% static 'img/home.svg' %}" alt="main_left" />
        </div>
        <span class="main_left_text text_left">Головна</span>
      </div>
      <div class="search_in_left_menu left_menu_block left_hover">
        <div class="left_side-img">
          <img class="search_pic" src="{% static 'img/Search.svg' %}" alt="search_left" />
        </div>
        <span class="search_left_text text_left">Пошук</span>
      </div>
      <div class="notifications_in_left_menu left_menu_block left_hover">
        <div class="left_side-img">
          <img class="notification_pic" src="{% static 'img/Notifications.svg' %}" alt="notifications_left" />
        </div>
        <span class="notifications_left_text text_left">Сповіщення</span>
      </div>
      <div class="message_in_left_menu left_menu_block left_hover">
        <div class="left_side-img">
          <img class="message_pic" src="{% static 'img/Message.svg' %}" alt="message_left" />
        </div>
        <span class="message_left_text text_left active_text">Повідомлення</span>
      </div>

      <div class="profile_in_left_menu left_menu_block left_hover">
        <div class="left_side-img">
          <img class="profile_pic" src="{% static 'img/profile.svg' %}" alt="profile_left" />
        </div>
        <span class="profile_left_text text_left">Профіль</span>
      </div>
    </div>

    <div class="post">
      <div class="user_add_post">
        <img class="avatar online" src="{% static 'assets/dp.png' %}" alt="avatar" />
        <div class="about_user">
          <span class="nickname_post">{{user.username}}</span>
        </div>
      </div>

      <form method="post" enctype="multipart/form-data" action="{% url 'our_post' %}" class="post_add">
        {% csrf_token %}

        {% comment %} {{ form.as_p }} {% endcomment %}
        <p><label for="{{ form.message.id_for_label }}" class="m-8"></label>{{ form.message }}</p>
        <p><label for="{{ form.content.id_for_label }}" class="m-8"><img
              src="{% static 'img/lenta/picture.svg' %}" /></label>{{ form.content }}</p>

        <div class="d-f m-8">
          <div class="row">
            <div class="post_content" id="contentBox">

            </div>
          </div>
          <button class="button_post">Надіслати</button>
        </div>

      </form>
      <div class="error_message" id="error">

      </div>

      {% for a in posts %}
      <div class="user_post">
        <img class="avatar online" src="{% static 'assets/dp.png' %}" alt="avatar" />

        <div class="about_user">
        
          <span class="nickname_post">{{a.userId}}</span>
     
          <span class="post_subtitle">
            {{a.message}}
          </span>
          {% for img in a.content.all %}

          <div class="div_image_post">
            <img src="{{img.photo.url}}" class="image_post" />
          </div>
          {% endfor%}
          <div class="about_post">
            <div class="post_like">

              {% if a.id in like_posts %}
              <img src="{% static 'img/lenta/likeClick.png'%}" style="cursor:pointer;"
                class="likebutton {{a.id}} likebutton_none{{a.id}} d-b" id="likebutton_none" />
              <img src="{% static 'img/lenta/like.svg'%}" style="cursor:pointer;"
                class="likebutton_none {{a.id}} likebutton{{a.id}} d-n" id="likebutton" />
              {% else %}
              <img src="{% static 'img/lenta/like.svg'%}" style="cursor:pointer;"
                class="likebutton {{a.id}} likebutton{{a.id}} d-b" id="likebutton" />
              <img src="{% static 'img/lenta/likeClick.png'%}" style="cursor:pointer;"
                class="likebutton_none {{a.id}} likebutton_none{{a.id}} d-n" id="likebutton_none" />
              {% endif %}

              {% for key, value in number_like.items %}
              {% if key == a.id %}

              <span class="like_number like_number{{key}}">{{ value }}</span>

              {% endif %}
              {% endfor %}
              {% if a.id not in all_id_post%}
              <span class="like_number like_number{{a.id}}">0</span>
              {% endif %}

            </div>
            <div class="post_comment">
              <a href="{% url 'comments' post_id=a.id  %}" class="nickname"><img
                  src="{% static 'img/lenta/comment.svg'%}" class="post_comment-img" /></a>
              <span>123 345</span>
            </div>
            <div class="post_time">
              <span>{{ a.createdAt|date:"M d" }}</span>
            </div>

          </div>
        </div>
      </div>
      {% endfor %}
    </div>


  </div>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="{% static 'js/textarea.js' %}"></script>
  <script src="{% static 'js/addimg.js' %}"></script>
  <script src="{% static 'js/like.js' %}"></script>
</body>

</html>